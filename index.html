<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="html2canvas.min.js"></script>
    <script type="text/javascript" src="canvas2image.js"></script>

    <title>Calculator</title>
</head>

<body>
    <div class="col-xs-12 col-md-6 container calculator_container  mt-1"
        style="box-shadow: 3px 3px 5px 7px rgba(0,0,0,.15); border-radius:7px; padding:5px">
        <h4 class="text-center bg-info" style="background: ; color:white; border-radius:4px; text-transform: uppercase">
            Expenditure Calculator</h4>

        <div class="input-group mb-3">
            <input type="number" class="form-control" placeholder="Enter salary...." id='salary'
                aria-label="Enter salary...." aria-describedby="button-addon2">
            <div class="input-group-append">
                <button class="btn  btn-info" type="button" id="calc">Calculate</button>
            </div>
        </div>
        <div>Fungu la kumi 10%: <span class="text-info float-right" id='ften'></span></div>
        <div>Akiba 30%: <span class="text-info float-right" id='akiba'></span></div>
        <div>Matumizi 40%: <span class="text-info float-right" id='matumz'></span></div>
        <div>Dharura 10%: <span class="text-info float-right" id='dharu'></span></div>
        <div>Msaada 5%: <span class="text-info float-right" id='msada'></span></div>
        <div>Sadaka 5%: <span class="text-info float-right" id='sadak'></span></div>

       <div class="col-md-12 text-right">
        <button class="btn btn-sm btn-success" id="download">
            Save as Image
        </button>
       </div>
        <div class="text-center">
            <small class="text-info">by Effort Stevens &#xA9;
                <span id="now"></span>
            </small>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            let dd = new Date().getFullYear();
            $('#now').html(dd)
        })
        $('#calc').on('click', function () {
            var salary = $('#salary').val();
            let ften = (0.1 * salary);
            let akiba = (0.3 * salary);
            let matumz = (0.4 * salary);
            let dharu = (0.1 * salary);
            let msada = (0.05 * salary);
            let sadak = (0.05 * salary);
            $('#ften').html(ften.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '/=');
            $('#akiba').html(akiba.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '/=');
            $('#matumz').html(matumz.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '/=');
            $('#dharu').html(dharu.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '/=');
            $('#msada').html(msada.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '/=');
            $('#sadak').html(sadak.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '/=');
        });


        var calculator_container = $(".calculator_container").get(0);
        $('#download').click(function (e) {
            html2canvas(calculator_container).then(function (canvas) {
                var canvasWidth = canvas.width;
                var canvasHeight = canvas.height;
                let type = 'png'; // image type
                let f = $('#salary').val();
                var img = Canvas2Image.convertToImage(canvas, canvasWidth, canvasHeight, type, 'jg');
                Canvas2Image.saveAsImage(canvas);
            });
        });

    </script>
</body>

</html>